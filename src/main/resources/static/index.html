<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AirQualityPT</title>
</head>
<style>

</style>
<body>
    <div>
        <h1>Escolhe uma cidade:</h1>
    </div>
    <div>
        <select class="mdb-select md-form" multiple id="selectCity">
            <option value="Aveiro">Aveiro</option>
            <option value="Beja">Beja</option>
            <option value="Braga">Braga</option>
            <option value="Bragança">Bragança</option>
            <option value="CasteloBranco">Castelo Branco</option>
            <option value="Coimbra">Coimbra</option>
            <option value="Évora">Évora</option>
            <option value="Faro">Faro</option>
            <option value="Funchal">Funchal</option>
            <option value="Guarda">Guarda</option>
            <option value="Leiria">Leiria</option>
            <option value="Lisboa">Lisboa</option>
            <option value="PontaDelgada">Ponta Delgada</option>
            <option value="Portalegre">Portalegre</option>
            <option value="Porto">Porto</option>
            <option value="Santarém">Santarém</option>
            <option value="Setubal">Setubal</option>
            <option value="Viana-do-Castelo">Viana do Castelo</option>
            <option value="VilaReal">Vila Real</option>
            <option value="Viseu">Viseu</option>
        </select>
        <button onclick="search()" type="button">Obter informação</button>
    </div>
    <br>
    <div id="div0"></div>
    <div id="div1"></div>
    <div id="div2"></div>
    <div id="div3"></div>
    <div id="div4"></div>

    <script>
        function search() {
            var c = document.getElementById("selectCity");
            var city = c.options[c.selectedIndex].value;
            //document.write('http://localhost:8080/api/airQuality/'+city)
            fetch('http://localhost:8080/api/airQuality/'+city)
                .then(res => res.json())
                .then(json => listAirQualityInfo(json));
        }

        function listAirQualityInfo(json) {
            for (i=0; i<=4; i++) {
                var div = document.getElementById("div" + i);
                div.innerHTML = "";

                var p1 = document.createElement("p");
                var text1 = document.createTextNode("Índice de qualidade do ar: " + json[i]["aqi"]);
                p1.appendChild(text1);
                div.append(p1);

                var p2 = document.createElement("p");
                var text2 = document.createTextNode("Concentração de O3(µg / m³): " + json[i]["o3"]);
                p2.appendChild(text2);
                div.append(p2);

                var p3 = document.createElement("p");
                var text3 = document.createTextNode("Concentração de CO(µg / m³): " + json[i]["co"]);
                p3.appendChild(text3);
                div.append(p3);

                var p4 = document.createElement("p");
                var text4 = document.createTextNode("Concentração de SO2(µg / m³): " + json[i]["so2"]);
                p4.appendChild(text4);
                div.append(p4);

                var p5 = document.createElement("p");
                var text5 = document.createTextNode("Concentração de NO2(µg / m³): " + json[i]["no2"]);
                p5.appendChild(text5);
                div.append(p5);
            }
        }
    </script>
</body>
</html>